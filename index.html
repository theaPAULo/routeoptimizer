<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Optimizer</title>
    <!-- Add Tailwind CSS via CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    <!-- Environment configuration script -->
    <script src="env-config.js"></script>
    <!-- Google Maps API Key Configuration -->
    <script>
        // Replace this with your actual Google Maps API key
        // This will be replaced with the environment variable on Netlify
        const googleMapsApiKey = 'GOOGLE_MAPS_API_KEY';
    </script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto p-4">
        <header class="mb-8">
            <div class="flex justify-between items-center">
                <h1 class="text-3xl font-bold text-blue-700">Route Optimizer</h1>
                <div>
                    <a href="https://github.com/yourusername/route-optimizer" target="_blank" 
                       class="text-gray-600 hover:text-black" title="View on GitHub">
                        <i class="fab fa-github text-2xl"></i>
                    </a>
                </div>
            </div>
            <p class="text-gray-600 mt-2">Find the most efficient route for multiple stops</p>
        </header>

        <main>
            <!-- Alert Box for Errors and Messages -->
            <div id="alert-box" class="hidden mb-4 p-4 rounded-md"></div>

            <!-- Input Form Section -->
            <section id="input-section" class="bg-white rounded-lg shadow-md p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">Enter Your Locations</h2>
                
                <form id="route-form" class="space-y-4">
                    <!-- Starting Location -->
                    <div>
                        <label for="start-location" class="block text-sm font-medium text-gray-700 mb-1">
                            Starting Location
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <i class="fas fa-map-marker-alt text-gray-400"></i>
                            </span>
                            <input 
                                type="text" 
                                id="start-location" 
                                class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                placeholder="Enter starting address"
                                required
                            >
                        </div>
                    </div>

                    <!-- Stops Container -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">
                            Stops
                        </label>
                        <div id="stops-container">
                            <!-- Initial stop field will be added by JavaScript -->
                        </div>
                        <button 
                            type="button" 
                            id="add-stop-btn" 
                            class="mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center"
                        >
                            <i class="fas fa-plus-circle mr-1"></i> Add another stop
                        </button>
                    </div>

                    <!-- Ending Location -->
                    <div>
                        <label for="end-location" class="block text-sm font-medium text-gray-700 mb-1">
                            Ending Location
                        </label>
                        <div class="relative">
                            <span class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                <i class="fas fa-flag-checkered text-gray-400"></i>
                            </span>
                            <input 
                                type="text" 
                                id="end-location" 
                                class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                placeholder="Enter ending address"
                                required
                            >
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="pt-2">
                        <button 
                            type="submit" 
                            id="optimize-btn"
                            class="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"
                        >
                            <span id="optimize-btn-text">Optimize Route</span>
                            <span id="loading-spinner" class="hidden">
                                <i class="fas fa-spinner fa-spin ml-2"></i>
                            </span>
                        </button>
                    </div>
                </form>
            </section>

            <!-- Results Section (Hidden by default) -->
            <section id="results-section" class="bg-white rounded-lg shadow-md p-6 hidden">
                <h2 class="text-xl font-semibold mb-4">Optimized Route</h2>
                
                <div class="grid md:grid-cols-2 gap-4 mb-6">
                    <div class="bg-blue-50 p-4 rounded-md">
                        <div class="flex items-center">
                            <i class="fas fa-route text-blue-600 text-xl mr-3"></i>
                            <div>
                                <h3 class="text-gray-500 text-sm">Total Distance</h3>
                                <p id="total-distance" class="font-medium text-lg">0 miles</p>
                            </div>
                        </div>
                    </div>
                    <div class="bg-blue-50 p-4 rounded-md">
                        <div class="flex items-center">
                            <i class="fas fa-clock text-blue-600 text-xl mr-3"></i>
                            <div>
                                <h3 class="text-gray-500 text-sm">Estimated Time</h3>
                                <p id="estimated-time" class="font-medium text-lg">0 min</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-6">
                    <h3 class="text-lg font-medium mb-3">Recommended Route Order:</h3>
                    <ol id="route-list" class="space-y-2 pl-0">
                        <!-- Route points will be added by JavaScript -->
                    </ol>
                </div>
                
                <div class="flex justify-between">
                    <button 
                        id="back-btn"
                        class="py-2 px-4 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"
                    >
                        Back to Form
                    </button>
                    <button 
                        id="save-btn"
                        class="py-2 px-4 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors"
                    >
                        <i class="fas fa-save mr-1"></i> Save Route
                    </button>
                </div>
            </section>
        </main>

        <footer class="mt-8 text-center text-gray-500 text-sm">
            <p>&copy; 2025 Route Optimizer | <a href="#" class="text-blue-600 hover:underline">Privacy Policy</a></p>
        </footer>
    </div>

    <!-- JavaScript Files -->
    <script src="app.js"></script>
    <script src="google-maps-integration.js"></script>
</body>
</html>
